# åç«¯æ¶æ„æ•´ç†æ–¹æ¡ˆ

## ğŸ“‹ ä¸€ã€ç°çŠ¶åˆ†æ

### 1.1 å½“å‰åŒ…ç»“æ„

```
com.ityfz.yulu/
â”œâ”€â”€ admin/              # Bç«¯ï¼ˆç®¡ç†å‘˜/å®¢æœï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ AdminAuthController.java      âœ… æ­£ç¡®
â”‚   â”‚   â”œâ”€â”€ AdminDashboardController.java âœ… æ­£ç¡®
â”‚   â”‚   â”œâ”€â”€ AdminSessionController.java   âœ… æ­£ç¡®
â”‚   â”‚   â””â”€â”€ AdminTicketController.java    âœ… æ­£ç¡®
â”‚   â””â”€â”€ dto/
â”‚       â””â”€â”€ DashboardStats.java           âœ… æ­£ç¡®
â”‚
â”œâ”€â”€ customer/           # Cç«¯ï¼ˆå®¢æˆ·ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ CustomerAuthController.java    âœ… æ­£ç¡®
â”‚   â”‚   â”œâ”€â”€ CustomerChatController.java    âœ… æ­£ç¡®
â”‚   â”‚   â””â”€â”€ CustomerFAQController.java    âœ… æ­£ç¡®
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ CustomerLoginRequest.java      âœ… æ­£ç¡®
â”‚       â””â”€â”€ CustomerRegisterRequest.java   âœ… æ­£ç¡®
â”‚
â”œâ”€â”€ chat/               # èŠå¤©æ¨¡å—ï¼ˆä¸šåŠ¡æ¨¡å—ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ ChatController.java           âŒ å†—ä½™ï¼ŒåŠŸèƒ½å·²æ‹†åˆ†åˆ°admin/customer
â”‚   â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ service/
â”‚
â”œâ”€â”€ ticket/             # å·¥å•æ¨¡å—ï¼ˆä¸šåŠ¡æ¨¡å—ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ TicketController.java          âŒ å†—ä½™ï¼ŒåŠŸèƒ½å·²æ‹†åˆ†åˆ°admin
â”‚   â”‚   â””â”€â”€ NotifyController.java         âœ… æ­£ç¡®ï¼ˆé€šçŸ¥æ¥å£ï¼‰
â”‚   â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ service/
â”‚
â”œâ”€â”€ user/               # ç”¨æˆ·æ¨¡å—ï¼ˆèŒè´£ä¸æ¸…ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ AuthController.java            âŒ å†—ä½™ï¼Œå·²è¢«AdminAuthControlleræ›¿ä»£
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ LoginRequest.java              âš ï¸  åº”ç§»åˆ°admin.dtoæˆ–common.dto
â”‚   â”‚   â”œâ”€â”€ LoginResponse.java             âš ï¸  åº”ç§»åˆ°common.dtoï¼ˆé€šç”¨å“åº”ï¼‰
â”‚   â”‚   â”œâ”€â”€ TenantRegisterRequest.java     âš ï¸  åº”ç§»åˆ°admin.dto
â”‚   â”‚   â”œâ”€â”€ TenantRegisterResponse.java    âš ï¸  åº”ç§»åˆ°admin.dto
â”‚   â”‚   â”œâ”€â”€ UserRegisterRequest.java       âš ï¸  åº”ç§»åˆ°admin.dtoï¼ˆBç«¯æ³¨å†Œç”¨æˆ·ï¼‰
â”‚   â”‚   â””â”€â”€ UserRegisterResponse.java     âš ï¸  åº”ç§»åˆ°admin.dto
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ Tenant.java                    âœ… æ­£ç¡®ï¼ˆå®ä½“ç±»ï¼‰
â”‚   â”‚   â””â”€â”€ User.java                      âœ… æ­£ç¡®ï¼ˆå®ä½“ç±»ï¼‰
â”‚   â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ service/
â”‚
â””â”€â”€ common/             # å…¬å…±æ¨¡å—
    â”œâ”€â”€ error/
    â”‚   â””â”€â”€ ErrorCodes.java                âŒ ä¸enums.ErrorCodesé‡å¤
    â””â”€â”€ enums/
        â””â”€â”€ ErrorCodes.java                âŒ ä¸error.ErrorCodesé‡å¤
```

---

## ğŸ” äºŒã€é—®é¢˜æ¸…å•

### 2.1 å†—ä½™çš„Controller

| æ–‡ä»¶                                   | é—®é¢˜                                                      | å¤„ç†æ–¹æ¡ˆ   |
| ------------------------------------ | ------------------------------------------------------- | ------ |
| `user.controller.AuthController`     | ä¸`AdminAuthController`åŠŸèƒ½é‡å¤                              | **åˆ é™¤** |
| `chat.controller.ChatController`     | åŠŸèƒ½å·²æ‹†åˆ†åˆ°`AdminSessionController`å’Œ`CustomerChatController` | **åˆ é™¤** |
| `ticket.controller.TicketController` | åŠŸèƒ½å·²æ‹†åˆ†åˆ°`AdminTicketController`                           | **åˆ é™¤** |

### 2.2 DTOä½ç½®ä¸å½“

| æ–‡ä»¶                       | å½“å‰ä½ç½®       | åº”ç§»ä½ç½®         | åŸå›              |
| ------------------------ | ---------- | ------------ | -------------- |
| `LoginRequest`           | `user.dto` | `admin.dto`  | Bç«¯ç™»å½•ä¸“ç”¨         |
| `LoginResponse`          | `user.dto` | `common.dto` | é€šç”¨å“åº”ï¼ŒB/Cç«¯éƒ½ç”¨    |
| `TenantRegisterRequest`  | `user.dto` | `admin.dto`  | Bç«¯ç§Ÿæˆ·æ³¨å†Œ         |
| `TenantRegisterResponse` | `user.dto` | `admin.dto`  | Bç«¯ç§Ÿæˆ·æ³¨å†Œ         |
| `UserRegisterRequest`    | `user.dto` | `admin.dto`  | Bç«¯æ³¨å†Œç”¨æˆ·ï¼ˆç®¡ç†å‘˜/å®¢æœï¼‰ |
| `UserRegisterResponse`   | `user.dto` | `admin.dto`  | Bç«¯æ³¨å†Œç”¨æˆ·         |

### 2.3 ErrorCodesé‡å¤

| æ–‡ä»¶ | é—®é¢˜ | å¤„ç†æ–¹æ¡ˆ |
|------|------|---------|
| `common.error.ErrorCodes` | ä¸`common.enums.ErrorCodes`é‡å¤ | **åˆå¹¶**ï¼Œä¿ç•™`common.enums.ErrorCodes`ï¼Œåˆ é™¤`common.error.ErrorCodes` |

### 2.4 åŒ…èŒè´£ä¸æ¸…

| åŒ… | å½“å‰èŒè´£ | é—®é¢˜ | å»ºè®® |
|-----|---------|------|------|
| `user` | ç”¨æˆ·ç®¡ç† + è®¤è¯ | èŒè´£æ··ä¹± | ä¿ç•™å®ä½“ç±»ã€Mapperã€Serviceï¼Œç§»é™¤Controllerå’ŒDTO |
| `chat` | èŠå¤©ä¸šåŠ¡æ¨¡å— | Controllerå†—ä½™ | ä¿ç•™entityã€mapperã€serviceï¼Œåˆ é™¤Controller |
| `ticket` | å·¥å•ä¸šåŠ¡æ¨¡å— | Controlleréƒ¨åˆ†å†—ä½™ | ä¿ç•™entityã€mapperã€serviceï¼Œåˆ é™¤`TicketController` |

---

## ğŸ“¦ ä¸‰ã€æ•´ç†æ–¹æ¡ˆ

### 3.1 åˆ é™¤å†—ä½™Controller

#### 3.1.1 åˆ é™¤ `user.controller.AuthController`

**åŸå› **ï¼š
- åŠŸèƒ½å·²è¢« `AdminAuthController` å®Œå…¨æ›¿ä»£
- è·¯ç”± `/api/auth/*` å·²è¢« `/api/admin/auth/*` æ›¿ä»£

**å½±å“**ï¼š
- âœ… æ— å½±å“ï¼Œå‰ç«¯å·²ä½¿ç”¨æ–°æ¥å£

**æ“ä½œ**ï¼š
```bash
åˆ é™¤ï¼šsrc/main/java/com/ityfz/yulu/user/controller/AuthController.java
```

#### 3.1.2 åˆ é™¤ `chat.controller.ChatController`

**åŸå› **ï¼š
- åŠŸèƒ½å·²æ‹†åˆ†ï¼š
  - Cç«¯ï¼š`CustomerChatController` (`/api/customer/chat/*`)
  - Bç«¯ï¼š`AdminSessionController` (`/api/admin/session/*`)

**å½±å“**ï¼š
- âš ï¸ éœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰å‰ç«¯ä»£ç ä»åœ¨ä½¿ç”¨ `/api/chat/*` æ¥å£
- å¦‚æœæœ‰ï¼Œéœ€è¦è¿ç§»åˆ°å¯¹åº”çš„B/Cç«¯æ¥å£

**æ“ä½œ**ï¼š
```bash
åˆ é™¤ï¼šsrc/main/java/com/ityfz/yulu/chat/controller/ChatController.java
```

#### 3.1.3 åˆ é™¤ `ticket.controller.TicketController`

**åŸå› **ï¼š
- åŠŸèƒ½å·²è¢« `AdminTicketController` å®Œå…¨æ›¿ä»£
- è·¯ç”± `/api/ticket/*` å·²è¢« `/api/admin/ticket/*` æ›¿ä»£

**å½±å“**ï¼š
- âš ï¸ éœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰å‰ç«¯ä»£ç ä»åœ¨ä½¿ç”¨ `/api/ticket/*` æ¥å£
- å¦‚æœæœ‰ï¼Œéœ€è¦è¿ç§»åˆ° `/api/admin/ticket/*`

**æ“ä½œ**ï¼š
```bash
åˆ é™¤ï¼šsrc/main/java/com/ityfz/yulu/ticket/controller/TicketController.java
```

---

### 3.2 DTOé‡æ–°ç»„ç»‡

#### 3.2.1 åˆ›å»º `common.dto` åŒ…

**ç›®çš„**ï¼šå­˜æ”¾é€šç”¨çš„DTOï¼ŒB/Cç«¯éƒ½ä½¿ç”¨

**æ–‡ä»¶**ï¼š
```
common/dto/
â””â”€â”€ LoginResponse.java          # ä» user.dto ç§»å…¥
```

#### 3.2.2 åˆ›å»º `admin.dto` åŒ…ï¼ˆå·²å­˜åœ¨ï¼Œè¡¥å……ï¼‰

**æ–‡ä»¶**ï¼š
```
admin/dto/
â”œâ”€â”€ DashboardStats.java          # å·²å­˜åœ¨
â”œâ”€â”€ LoginRequest.java            # ä» user.dto ç§»å…¥
â”œâ”€â”€ TenantRegisterRequest.java   # ä» user.dto ç§»å…¥
â”œâ”€â”€ TenantRegisterResponse.java  # ä» user.dto ç§»å…¥
â”œâ”€â”€ UserRegisterRequest.java     # ä» user.dto ç§»å…¥
â””â”€â”€ UserRegisterResponse.java    # ä» user.dto ç§»å…¥
```

#### 3.2.3 ä¿ç•™ `customer.dto` åŒ…

**æ–‡ä»¶**ï¼š
```
customer/dto/
â”œâ”€â”€ CustomerLoginRequest.java    # å·²å­˜åœ¨
â””â”€â”€ CustomerRegisterRequest.java # å·²å­˜åœ¨
```

---

### 3.3 ErrorCodesåˆå¹¶

#### 3.3.1 åˆå¹¶ç­–ç•¥

**ä¿ç•™**ï¼š`common.enums.ErrorCodes`
**åˆ é™¤**ï¼š`common.error.ErrorCodes`

**åŸå› **ï¼š
- `enums` åŒ…æ›´ç¬¦åˆæšä¸¾ç±»çš„è¯­ä¹‰
- ç»Ÿä¸€é”™è¯¯ç ç®¡ç†

**æ“ä½œ**ï¼š
1. æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯å¦ä¸€è‡´
2. å¦‚æœä¸ä¸€è‡´ï¼Œåˆå¹¶åˆ° `common.enums.ErrorCodes`
3. æ›´æ–°æ‰€æœ‰å¼•ç”¨ `common.error.ErrorCodes` çš„å¯¼å…¥è¯­å¥
4. åˆ é™¤ `common.error.ErrorCodes.java`

---

### 3.4 åŒ…èŒè´£æ˜ç¡®åŒ–

#### 3.4.1 `user` åŒ…èŒè´£

**ä¿ç•™**ï¼š
- âœ… `user.entity` - ç”¨æˆ·å’Œç§Ÿæˆ·å®ä½“ç±»
- âœ… `user.mapper` - ç”¨æˆ·å’Œç§Ÿæˆ·Mapper
- âœ… `user.service` - ç”¨æˆ·å’Œç§Ÿæˆ·Service

**ç§»é™¤**ï¼š
- âŒ `user.controller` - åˆ é™¤AuthController
- âŒ `user.dto` - DTOç§»åˆ°admin.dtoå’Œcommon.dto

**æœ€ç»ˆç»“æ„**ï¼š
```
user/
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ Tenant.java
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ TenantMapper.java
â”‚   â””â”€â”€ UserMapper.java
â””â”€â”€ service/
    â”œâ”€â”€ TenantService.java
    â”œâ”€â”€ UserService.java
    â””â”€â”€ impl/
        â”œâ”€â”€ TenantServiceImpl.java
        â””â”€â”€ UserServiceImpl.java
```

#### 3.4.2 `chat` åŒ…èŒè´£

**ä¿ç•™**ï¼š
- âœ… `chat.entity` - èŠå¤©å®ä½“ç±»
- âœ… `chat.mapper` - èŠå¤©Mapper
- âœ… `chat.service` - èŠå¤©Service
- âœ… `chat.dto` - èŠå¤©DTOï¼ˆå¦‚ChatAskRequestï¼‰

**ç§»é™¤**ï¼š
- âŒ `chat.controller` - åˆ é™¤ChatController

**æœ€ç»ˆç»“æ„**ï¼š
```
chat/
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ ChatSession.java
â”‚   â””â”€â”€ ChatMessage.java
â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ ChatSessionMapper.java
â”‚   â””â”€â”€ ChatMessageMapper.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ ChatService.java
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ ChatServiceImpl.java
â””â”€â”€ dto/
    â””â”€â”€ ChatAskRequest.java
```

#### 3.4.3 `ticket` åŒ…èŒè´£

**ä¿ç•™**ï¼š
- âœ… `ticket.entity` - å·¥å•å®ä½“ç±»
- âœ… `ticket.mapper` - å·¥å•Mapper
- âœ… `ticket.service` - å·¥å•Service
- âœ… `ticket.dto` - å·¥å•DTO
- âœ… `ticket.controller.NotifyController` - é€šçŸ¥æ¥å£ï¼ˆé€šç”¨ï¼‰

**ç§»é™¤**ï¼š
- âŒ `ticket.controller.TicketController` - åˆ é™¤

**æœ€ç»ˆç»“æ„**ï¼š
```
ticket/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ NotifyController.java    # ä¿ç•™ï¼ˆé€šçŸ¥æ¥å£ï¼‰
â”œâ”€â”€ entity/
â”œâ”€â”€ mapper/
â”œâ”€â”€ service/
â””â”€â”€ dto/
```

---

## ğŸ“‹ å››ã€è¯¦ç»†è¿ç§»æ¸…å•

### 4.1 Controlleråˆ é™¤æ¸…å•

| æ–‡ä»¶ | æ“ä½œ | åŸå›  |
|------|------|------|
| `user.controller.AuthController` | åˆ é™¤ | å·²è¢«AdminAuthControlleræ›¿ä»£ |
| `chat.controller.ChatController` | åˆ é™¤ | åŠŸèƒ½å·²æ‹†åˆ†åˆ°AdminSessionControllerå’ŒCustomerChatController |
| `ticket.controller.TicketController` | åˆ é™¤ | å·²è¢«AdminTicketControlleræ›¿ä»£ |

### 4.2 DTOè¿ç§»æ¸…å•

| æºæ–‡ä»¶ | ç›®æ ‡æ–‡ä»¶ | æ“ä½œ |
|--------|---------|------|
| `user.dto.LoginRequest` | `admin.dto.LoginRequest` | ç§»åŠ¨ |
| `user.dto.LoginResponse` | `common.dto.LoginResponse` | ç§»åŠ¨ |
| `user.dto.TenantRegisterRequest` | `admin.dto.TenantRegisterRequest` | ç§»åŠ¨ |
| `user.dto.TenantRegisterResponse` | `admin.dto.TenantRegisterResponse` | ç§»åŠ¨ |
| `user.dto.UserRegisterRequest` | `admin.dto.UserRegisterRequest` | ç§»åŠ¨ |
| `user.dto.UserRegisterResponse` | `admin.dto.UserRegisterResponse` | ç§»åŠ¨ |

### 4.3 ErrorCodesåˆå¹¶æ¸…å•

| æ“ä½œ | æ–‡ä»¶ |
|------|------|
| ä¿ç•™ | `common.enums.ErrorCodes` |
| åˆ é™¤ | `common.error.ErrorCodes` |
| æ›´æ–°å¯¼å…¥ | æ‰€æœ‰å¼•ç”¨ `common.error.ErrorCodes` çš„æ–‡ä»¶ |

---

## ğŸ”§ äº”ã€å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºcommon.dtoåŒ…

```bash
# åˆ›å»ºç›®å½•
mkdir -p src/main/java/com/ityfz/yulu/common/dto

# ç§»åŠ¨LoginResponse
mv src/main/java/com/ityfz/yulu/user/dto/LoginResponse.java \
   src/main/java/com/ityfz/yulu/common/dto/LoginResponse.java
```

### æ­¥éª¤2ï¼šç§»åŠ¨DTOåˆ°admin.dto

```bash
# ç§»åŠ¨LoginRequest
mv src/main/java/com/ityfz/yulu/user/dto/LoginRequest.java \
   src/main/java/com/ityfz/yulu/admin/dto/LoginRequest.java

# ç§»åŠ¨TenantRegisterRequest
mv src/main/java/com/ityfz/yulu/user/dto/TenantRegisterRequest.java \
   src/main/java/com/ityfz/yulu/admin/dto/TenantRegisterRequest.java

# ç§»åŠ¨TenantRegisterResponse
mv src/main/java/com/ityfz/yulu/user/dto/TenantRegisterResponse.java \
   src/main/java/com/ityfz/yulu/admin/dto/TenantRegisterResponse.java

# ç§»åŠ¨UserRegisterRequest
mv src/main/java/com/ityfz/yulu/user/dto/UserRegisterRequest.java \
   src/main/java/com/ityfz/yulu/admin/dto/UserRegisterRequest.java

# ç§»åŠ¨UserRegisterResponse
mv src/main/java/com/ityfz/yulu/user/dto/UserRegisterResponse.java \
   src/main/java/com/ityfz/yulu/admin/dto/UserRegisterResponse.java
```

### æ­¥éª¤3ï¼šæ›´æ–°åŒ…åå’Œå¯¼å…¥

**éœ€è¦æ›´æ–°çš„æ–‡ä»¶**ï¼š
1. `AdminAuthController.java` - æ›´æ–°DTOå¯¼å…¥
2. `CustomerAuthController.java` - æ›´æ–°LoginResponseå¯¼å…¥
3. `TenantServiceImpl.java` - æ›´æ–°DTOå¯¼å…¥
4. `UserServiceImpl.java` - æ›´æ–°DTOå¯¼å…¥
5. å…¶ä»–å¼•ç”¨è¿™äº›DTOçš„æ–‡ä»¶

### æ­¥éª¤4ï¼šåˆå¹¶ErrorCodes

```bash
# 1. æ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶å†…å®¹
diff src/main/java/com/ityfz/yulu/common/error/ErrorCodes.java \
     src/main/java/com/ityfz/yulu/common/enums/ErrorCodes.java

# 2. å¦‚æœå†…å®¹ä¸ä¸€è‡´ï¼Œåˆå¹¶åˆ°enums.ErrorCodes

# 3. æ›´æ–°æ‰€æœ‰å¯¼å…¥
# æŸ¥æ‰¾æ‰€æœ‰å¼•ç”¨ common.error.ErrorCodes çš„æ–‡ä»¶
grep -r "common.error.ErrorCodes" src/main/java

# 4. åˆ é™¤error.ErrorCodes
rm src/main/java/com/ityfz/yulu/common/error/ErrorCodes.java

# 5. å¦‚æœerroråŒ…ä¸ºç©ºï¼Œåˆ é™¤errorç›®å½•
rmdir src/main/java/com/ityfz/yulu/common/error
```

### æ­¥éª¤5ï¼šåˆ é™¤å†—ä½™Controller

```bash
# åˆ é™¤AuthController
rm src/main/java/com/ityfz/yulu/user/controller/AuthController.java

# åˆ é™¤ChatController
rm src/main/java/com/ityfz/yulu/chat/controller/ChatController.java

# åˆ é™¤TicketController
rm src/main/java/com/ityfz/yulu/ticket/controller/TicketController.java

# å¦‚æœcontrollerç›®å½•ä¸ºç©ºï¼Œåˆ é™¤ç›®å½•
rmdir src/main/java/com/ityfz/yulu/user/controller
```

### æ­¥éª¤6ï¼šæ›´æ–°JWTè¿‡æ»¤å™¨æ’é™¤URL

**æ–‡ä»¶**ï¼š`common.config.WebMvcConfig.java`

**æ›´æ–°**ï¼šç§»é™¤æ—§çš„ `/api/auth/*` è·¯å¾„ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

---

## ğŸ“Š å…­ã€æ•´ç†åçš„æ¶æ„

### 6.1 æœ€ç»ˆåŒ…ç»“æ„

```
com.ityfz.yulu/
â”œâ”€â”€ admin/                    # Bç«¯ï¼ˆç®¡ç†å‘˜/å®¢æœï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ AdminAuthController.java
â”‚   â”‚   â”œâ”€â”€ AdminDashboardController.java
â”‚   â”‚   â”œâ”€â”€ AdminSessionController.java
â”‚   â”‚   â””â”€â”€ AdminTicketController.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ DashboardStats.java
â”‚       â”œâ”€â”€ LoginRequest.java
â”‚       â”œâ”€â”€ TenantRegisterRequest.java
â”‚       â”œâ”€â”€ TenantRegisterResponse.java
â”‚       â”œâ”€â”€ UserRegisterRequest.java
â”‚       â””â”€â”€ UserRegisterResponse.java
â”‚
â”œâ”€â”€ customer/                 # Cç«¯ï¼ˆå®¢æˆ·ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ CustomerAuthController.java
â”‚   â”‚   â”œâ”€â”€ CustomerChatController.java
â”‚   â”‚   â””â”€â”€ CustomerFAQController.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ CustomerLoginRequest.java
â”‚       â””â”€â”€ CustomerRegisterRequest.java
â”‚
â”œâ”€â”€ chat/                     # èŠå¤©ä¸šåŠ¡æ¨¡å—ï¼ˆæ— Controllerï¼‰
â”‚   â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ ticket/                   # å·¥å•ä¸šåŠ¡æ¨¡å—ï¼ˆä»…NotifyControllerï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ NotifyController.java
â”‚   â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ dto/
â”‚
â”œâ”€â”€ user/                     # ç”¨æˆ·æ¨¡å—ï¼ˆæ— Controllerï¼Œæ— DTOï¼‰
â”‚   â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ service/
â”‚
â””â”€â”€ common/                   # å…¬å…±æ¨¡å—
    â”œâ”€â”€ dto/
    â”‚   â””â”€â”€ LoginResponse.java
    â”œâ”€â”€ enums/
    â”‚   â”œâ”€â”€ ErrorCodes.java
    â”‚   â””â”€â”€ Roles.java
    â”œâ”€â”€ exception/
    â”œâ”€â”€ model/
    â”œâ”€â”€ security/
    â””â”€â”€ tenant/
```

### 6.2 APIè·¯ç”±è§„èŒƒ

| è·¯ç”±å‰ç¼€ | ç”¨é€” | Controller |
|---------|------|-----------|
| `/api/admin/*` | Bç«¯æ¥å£ | `admin.controller.*` |
| `/api/customer/*` | Cç«¯æ¥å£ | `customer.controller.*` |
| `/api/ticket/notify/*` | é€šçŸ¥æ¥å£ï¼ˆé€šç”¨ï¼‰ | `ticket.controller.NotifyController` |

---

## âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹

### 7.1 å‰ç«¯ä»£ç æ£€æŸ¥

**éœ€è¦æ£€æŸ¥çš„å‰ç«¯æ–‡ä»¶**ï¼š
1. `frontend/src/api/auth.ts` - ç¡®è®¤ä½¿ç”¨ `/api/admin/auth/*` å’Œ `/api/customer/auth/*`
2. `frontend/src/api/chat.ts` - ç¡®è®¤ä½¿ç”¨ `/api/customer/chat/*` å’Œ `/api/admin/session/*`
3. `frontend/src/api/ticket.ts` - ç¡®è®¤ä½¿ç”¨ `/api/admin/ticket/*`

**å¦‚æœå‘ç°æ—§æ¥å£è°ƒç”¨**ï¼š
- `/api/auth/*` â†’ æ”¹ä¸º `/api/admin/auth/*`
- `/api/chat/*` â†’ æ”¹ä¸º `/api/customer/chat/*` æˆ– `/api/admin/session/*`
- `/api/ticket/*` â†’ æ”¹ä¸º `/api/admin/ticket/*`

### 7.2 æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] Bç«¯ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] Cç«¯ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] Bç«¯æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] Cç«¯æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] Bç«¯ä¼šè¯ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] Cç«¯èŠå¤©åŠŸèƒ½æ­£å¸¸
- [ ] Bç«¯å·¥å•ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] é€šçŸ¥åŠŸèƒ½æ­£å¸¸

### 7.3 ä»£ç å®¡æŸ¥é‡ç‚¹

1. **å¯¼å…¥è¯­å¥**ï¼šç¡®ä¿æ‰€æœ‰DTOå¯¼å…¥è·¯å¾„æ­£ç¡®
2. **åŒ…å**ï¼šç¡®ä¿æ‰€æœ‰ç±»çš„åŒ…åå·²æ›´æ–°
3. **è·¯ç”±æ˜ å°„**ï¼šç¡®ä¿Controllerçš„`@RequestMapping`æ­£ç¡®
4. **ä¾èµ–æ³¨å…¥**ï¼šç¡®ä¿Serviceå’ŒMapperçš„æ³¨å…¥æ­£å¸¸

---

## ğŸ“ å…«ã€æ€»ç»“

### 8.1 æ•´ç†æ”¶ç›Š

- âœ… **èŒè´£æ¸…æ™°**ï¼šB/Cç«¯åˆ†ç¦»ï¼Œä¸šåŠ¡æ¨¡å—ç‹¬ç«‹
- âœ… **ä»£ç ç²¾ç®€**ï¼šåˆ é™¤å†—ä½™Controllerï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬
- âœ… **ç»“æ„è§„èŒƒ**ï¼šDTOæŒ‰ç”¨é€”åˆ†ç±»ï¼Œä¾¿äºç®¡ç†
- âœ… **ç»Ÿä¸€æ ‡å‡†**ï¼šErrorCodesç»Ÿä¸€ç®¡ç†

### 8.2 æ•´ç†åŸåˆ™

1. **B/Cç«¯åˆ†ç¦»**ï¼šBç«¯åŠŸèƒ½æ”¾åœ¨`admin`åŒ…ï¼ŒCç«¯åŠŸèƒ½æ”¾åœ¨`customer`åŒ…
2. **ä¸šåŠ¡æ¨¡å—ç‹¬ç«‹**ï¼š`chat`ã€`ticket`ç­‰ä¸šåŠ¡æ¨¡å—åªä¿ç•™entityã€mapperã€service
3. **é€šç”¨ç»„ä»¶æŠ½ç¦»**ï¼šé€šç”¨DTOæ”¾åœ¨`common.dto`ï¼Œé€šç”¨æšä¸¾æ”¾åœ¨`common.enums`
4. **é¿å…é‡å¤**ï¼šåˆ é™¤åŠŸèƒ½é‡å¤çš„Controllerå’Œç±»

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-14  
**æœ€åæ›´æ–°**ï¼š2026-01-14





























