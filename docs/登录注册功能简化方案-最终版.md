# ç™»å½•æ³¨å†ŒåŠŸèƒ½ç®€åŒ–æ–¹æ¡ˆï¼ˆæœ€ç»ˆç‰ˆï¼‰

## ğŸ“‹ ä¸€ã€æ–¹æ¡ˆè¯´æ˜

### 1.1 ç®€åŒ–åŸåˆ™

**æ ¸å¿ƒæ€è·¯**ï¼šç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ç§Ÿæˆ·æ ‡è¯†ï¼Œåç«¯ç›´æ¥æŸ¥è¡¨

- âœ… **ç®€å•ç›´æ¥**ï¼šä¸éœ€è¦å¤æ‚çš„ä¼˜å…ˆçº§é€»è¾‘
- âœ… **ç”¨æˆ·å¯æ§**ï¼šç”¨æˆ·æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å“ªä¸ªç§Ÿæˆ·ä¸‹
- âœ… **æ˜“äºç†è§£**ï¼šé€»è¾‘æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤

### 1.2 ç§Ÿæˆ·è¯†åˆ«æ–¹å¼

**Cç«¯ï¼ˆå®¢æˆ·ï¼‰**ï¼š
- ç”¨æˆ·åœ¨ç™»å½•/æ³¨å†Œé¡µé¢**æ‰‹åŠ¨è¾“å…¥**ç§Ÿæˆ·æ ‡è¯†ï¼ˆå¦‚ï¼šEDU_001ï¼‰
- åç«¯æ ¹æ®ç§Ÿæˆ·æ ‡è¯†ç›´æ¥æŸ¥è¯¢ç§Ÿæˆ·è¡¨
- å¦‚æœç§Ÿæˆ·ä¸å­˜åœ¨æˆ–å·²ç¦ç”¨ï¼Œè¿”å›é”™è¯¯

**Bç«¯ï¼ˆç®¡ç†å‘˜/å®¢æœï¼‰**ï¼š
- ç”¨æˆ·åœ¨ç™»å½•é¡µé¢**æ‰‹åŠ¨è¾“å…¥**ç§Ÿæˆ·ç¼–ç ï¼ˆå¦‚ï¼šTENANT_001ï¼‰
- åç«¯æ ¹æ®ç§Ÿæˆ·ç¼–ç æŸ¥è¯¢ç§Ÿæˆ·è¡¨
- é€»è¾‘ä¿æŒä¸å˜

---

## ğŸ—„ï¸ äºŒã€æ•°æ®åº“è®¾è®¡

### 2.1 tenantè¡¨ç»“æ„

```sql
CREATE TABLE tenant (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    tenant_code VARCHAR(64) UNIQUE NOT NULL COMMENT 'ç§Ÿæˆ·ç¼–ç ï¼ˆBç«¯ä½¿ç”¨ï¼‰',
    tenant_identifier VARCHAR(64) UNIQUE COMMENT 'ç§Ÿæˆ·æ ‡è¯†ç ï¼ˆCç«¯ä½¿ç”¨ï¼‰',
    name VARCHAR(255) COMMENT 'ç§Ÿæˆ·åç§°',
    status INT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¯ç”¨ 0-ç¦ç”¨',
    remark VARCHAR(500) COMMENT 'å¤‡æ³¨',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_tenant_code ON tenant(tenant_code);
CREATE INDEX idx_tenant_identifier ON tenant(tenant_identifier);
```

### 2.2 å­—æ®µè¯´æ˜

| å­—æ®µ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| `tenant_code` | ç§Ÿæˆ·ç¼–ç  | Bç«¯ç™»å½•ä½¿ç”¨ï¼ˆå¦‚ï¼šTENANT_001ï¼‰ |
| `tenant_identifier` | ç§Ÿæˆ·æ ‡è¯†ç  | Cç«¯ç™»å½•/æ³¨å†Œä½¿ç”¨ï¼ˆå¦‚ï¼šEDU_001ï¼‰ |

**æ³¨æ„**ï¼š
- `tenant_identifier` å¯ä»¥ä¸ºç©ºï¼ˆå¦‚æœä¸ºç©ºï¼ŒCç«¯ç”¨æˆ·æ— æ³•ç™»å½•ï¼‰
- å»ºè®®åœ¨åˆ›å»ºç§Ÿæˆ·æ—¶è®¾ç½® `tenant_identifier`ï¼Œå¯ä»¥ç­‰äº `tenant_code` æˆ–è®¾ç½®ä¸ºæ›´å‹å¥½çš„æ ‡è¯†

---

## ğŸ”§ ä¸‰ã€åç«¯å®ç°

### 3.1 Cç«¯ç™»å½•æ¥å£

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/customer/controller/CustomerAuthController.java`

**æ¥å£**ï¼š`POST /api/customer/auth/login`

**è¯·æ±‚ä½“**ï¼š
```json
{
  "tenantIdentifier": "EDU_001",
  "username": "zhangsan",
  "password": "123456"
}
```

**é€»è¾‘æµç¨‹**ï¼š
1. æ¥æ”¶è¯·æ±‚ä½“ä¸­çš„ `tenantIdentifier`
2. æ ¹æ® `tenantIdentifier` æŸ¥è¯¢ç§Ÿæˆ·è¡¨ï¼Œè·å– `tenant_id`
3. å¦‚æœç§Ÿæˆ·ä¸å­˜åœ¨æˆ–å·²ç¦ç”¨ï¼Œè¿”å›é”™è¯¯
4. è®¾ç½®ç§Ÿæˆ·ä¸Šä¸‹æ–‡
5. æŸ¥è¯¢ç”¨æˆ·ï¼ˆ`tenant_id` + `username` + `role=USER`ï¼‰
6. éªŒè¯å¯†ç 
7. ç”ŸæˆTokenå¹¶è¿”å›

**æ ¸å¿ƒä»£ç **ï¼š
```java
@PostMapping("/login")
public ApiResponse<LoginResponse> login(@Valid @RequestBody CustomerLoginRequest request) {
    // 1. æ ¹æ®ç§Ÿæˆ·æ ‡è¯†ç æŸ¥è¯¢ç§Ÿæˆ·IDï¼ˆæ–¹æ³•å†…éƒ¨å·²æ ¡éªŒç§Ÿæˆ·çŠ¶æ€ï¼‰
    Long tenantId = getTenantIdByIdentifier(request.getTenantIdentifier());
    
    // 2. è®¾ç½®ç§Ÿæˆ·ä¸Šä¸‹æ–‡
    TenantContextHolder.setTenantId(tenantId);
    try {
        // 3. æŸ¥è¯¢ç”¨æˆ·ï¼ˆå¿…é¡»æ˜¯USERè§’è‰²ï¼‰
        User user = userMapper.selectOne(
            new LambdaQueryWrapper<User>()
                .eq(User::getTenantId, tenantId)
                .eq(User::getUsername, request.getUsername())
                .eq(User::getRole, "USER")
        );
        
        if (user == null || user.getStatus() != 1) {
            throw new BizException(ErrorCodes.USER_NOT_FOUND, "ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²ç¦ç”¨");
        }
        
        if (!passwordEncoder.matches(request.getPassword(), user.getPassword())) {
            throw new BizException(ErrorCodes.BAD_CREDENTIALS, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
        }
        
        // 4. ç”ŸæˆTokenå¹¶è¿”å›
        // ...
    } finally {
        TenantContextHolder.clear();
    }
}

/**
 * æ ¹æ®ç§Ÿæˆ·æ ‡è¯†ç æŸ¥è¯¢ç§Ÿæˆ·ID
 */
private Long getTenantIdByIdentifier(String tenantIdentifier) {
    if (tenantIdentifier == null || tenantIdentifier.isEmpty()) {
        throw new BizException(ErrorCodes.TENANT_REQUIRED, "ç§Ÿæˆ·æ ‡è¯†ä¸èƒ½ä¸ºç©º");
    }
    
    Tenant tenant = tenantMapper.selectOne(
        new LambdaQueryWrapper<Tenant>()
            .eq(Tenant::getTenantIdentifier, tenantIdentifier)
            .eq(Tenant::getStatus, 1)  // åªæŸ¥è¯¢å¯ç”¨çš„ç§Ÿæˆ·
    );
    
    if (tenant == null) {
        throw new BizException(ErrorCodes.TENANT_NOT_FOUND, 
            "ç§Ÿæˆ·æ ‡è¯†ç ä¸å­˜åœ¨: " + tenantIdentifier);
    }
    
    return tenant.getId();
}
```

### 3.2 Cç«¯æ³¨å†Œæ¥å£

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/customer/controller/CustomerAuthController.java`

**æ¥å£**ï¼š`POST /api/customer/auth/register`

**è¯·æ±‚ä½“**ï¼š
```json
{
  "tenantIdentifier": "EDU_001",
  "username": "zhangsan",
  "password": "123456",
  "nickName": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "phone": "13800138000"
}
```

**é€»è¾‘æµç¨‹**ï¼š
1. æ ¹æ® `tenantIdentifier` æŸ¥è¯¢ç§Ÿæˆ·
2. æ ¡éªŒç”¨æˆ·åå”¯ä¸€æ€§ï¼ˆåŒç§Ÿæˆ·å†…ï¼‰
3. åˆ›å»ºç”¨æˆ·ï¼ˆå›ºå®šä¸ºUSERè§’è‰²ï¼‰
4. è‡ªåŠ¨ç™»å½•ï¼ˆè¿”å›Tokenï¼‰

### 3.3 Bç«¯ç™»å½•æ¥å£

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/admin/controller/AdminAuthController.java`

**æ¥å£**ï¼š`POST /api/admin/auth/login`

**è¯·æ±‚ä½“**ï¼š
```json
{
  "tenantCode": "TENANT_001",
  "username": "admin",
  "password": "123456"
}
```

**é€»è¾‘**ï¼šå¤ç”¨ç°æœ‰çš„ `TenantService.login()` æ–¹æ³•

### 3.4 Bç«¯æ³¨å†Œæ¥å£

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/admin/controller/AdminAuthController.java`

**æ¥å£**ï¼š`POST /api/admin/auth/registerTenant`

**è¯·æ±‚ä½“**ï¼š
```json
{
  "tenantCode": "TENANT_001",
  "tenantName": "æ•™è‚²æœºæ„A",
  "tenantIdentifier": "EDU_001",
  "adminUsername": "admin",
  "adminPassword": "123456"
}
```

**é€»è¾‘**ï¼šå¤ç”¨ç°æœ‰çš„ `TenantService.registerTenant()` æ–¹æ³•ï¼Œæ³¨å†Œæ—¶è‡ªåŠ¨è®¾ç½® `tenant_identifier`

---

## ğŸ¨ å››ã€å‰ç«¯å®ç°

### 4.1 Cç«¯ç™»å½•é¡µé¢

**æ–‡ä»¶**ï¼š`frontend/src/pages/Login.tsx`

**è¡¨å•å­—æ®µ**ï¼š
- ç§Ÿæˆ·æ ‡è¯†ï¼ˆå¿…å¡«ï¼‰
- ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰
- å¯†ç ï¼ˆå¿…å¡«ï¼‰

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
{isAdmin ? (
  // Bç«¯ç™»å½•è¡¨å•
  <>
    <Form.Item label="ç§Ÿæˆ·ç¼–ç " name="tenantCode" rules={[{ required: true }]}>
      <Input placeholder="ä¾‹å¦‚ TENANT_001" />
    </Form.Item>
    <Form.Item label="ç”¨æˆ·å" name="username" rules={[{ required: true }]}>
      <Input />
    </Form.Item>
    <Form.Item label="å¯†ç " name="password" rules={[{ required: true }]}>
      <Input.Password />
    </Form.Item>
  </>
) : (
  // Cç«¯ç™»å½•è¡¨å•
  <>
    <Form.Item label="ç§Ÿæˆ·æ ‡è¯†" name="tenantIdentifier" rules={[{ required: true }]}>
      <Input placeholder="ä¾‹å¦‚ EDU_001" />
    </Form.Item>
    <Form.Item label="ç”¨æˆ·å" name="username" rules={[{ required: true }]}>
      <Input />
    </Form.Item>
    <Form.Item label="å¯†ç " name="password" rules={[{ required: true }]}>
      <Input.Password />
    </Form.Item>
  </>
)}
```

### 4.2 Cç«¯æ³¨å†Œé¡µé¢

**æ–‡ä»¶**ï¼š`frontend/src/pages/Register.tsx`

**è¡¨å•å­—æ®µ**ï¼š
- ç§Ÿæˆ·æ ‡è¯†ï¼ˆå¿…å¡«ï¼‰
- ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰
- å¯†ç ï¼ˆå¿…å¡«ï¼‰
- æ˜µç§°ï¼ˆå¯é€‰ï¼‰
- é‚®ç®±ï¼ˆå¯é€‰ï¼‰
- æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰

### 4.3 APIè°ƒç”¨

**æ–‡ä»¶**ï¼š`frontend/src/api/auth.ts`

```typescript
export const authApi = {
  // Bç«¯ç™»å½•
  adminLogin(data: { tenantCode: string; username: string; password: string }) {
    return http.post<ApiResponse<LoginResponse>>('/admin/auth/login', data);
  },
  
  // Cç«¯ç™»å½•
  customerLogin(data: { tenantIdentifier: string; username: string; password: string }) {
    return http.post<ApiResponse<LoginResponse>>('/customer/auth/login', data);
  },
  
  // Bç«¯æ³¨å†Œ
  adminRegisterTenant(data: {
    tenantCode: string;
    tenantName: string;
    tenantIdentifier?: string;
    adminUsername: string;
    adminPassword: string;
  }) {
    return http.post<ApiResponse<any>>('/admin/auth/registerTenant', data);
  },
  
  // Cç«¯æ³¨å†Œ
  customerRegister(data: {
    tenantIdentifier: string;
    username: string;
    password: string;
    nickName?: string;
    email?: string;
    phone?: string;
  }) {
    return http.post<ApiResponse<LoginResponse>>('/customer/auth/register', data);
  }
};
```

---

## ğŸ“ äº”ã€DTOå®šä¹‰

### 5.1 Cç«¯ç™»å½•DTO

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/customer/dto/CustomerLoginRequest.java`

```java
@Data
public class CustomerLoginRequest {
    @NotBlank(message = "ç§Ÿæˆ·æ ‡è¯†ä¸èƒ½ä¸ºç©º")
    private String tenantIdentifier;

    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;

    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;
}
```

### 5.2 Cç«¯æ³¨å†ŒDTO

**æ–‡ä»¶**ï¼š`src/main/java/com/ityfz/yulu/customer/dto/CustomerRegisterRequest.java`

```java
@Data
public class CustomerRegisterRequest {
    @NotBlank(message = "ç§Ÿæˆ·æ ‡è¯†ä¸èƒ½ä¸ºç©º")
    private String tenantIdentifier;

    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;

    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;

    private String nickName;
    private String email;
    private String phone;
}
```

---

## ğŸ”„ å…­ã€å·²ç§»é™¤çš„å¤æ‚é€»è¾‘

### 6.1 ç§»é™¤çš„åŠŸèƒ½

1. **URLå‚æ•°è¯†åˆ«**ï¼šä¸å†ä»URLå‚æ•° `?tenant=xxx` è·å–ç§Ÿæˆ·æ ‡è¯†
2. **è¯·æ±‚å¤´è¯†åˆ«**ï¼šä¸å†ä»è¯·æ±‚å¤´ `X-Tenant-Identifier` è·å–ç§Ÿæˆ·æ ‡è¯†
3. **ä¼˜å…ˆçº§é€»è¾‘**ï¼šä¸å†æœ‰"URLå‚æ•° > è¯·æ±‚å¤´ > è¯·æ±‚ä½“"çš„ä¼˜å…ˆçº§
4. **TenantIdentifierå·¥å…·ç±»**ï¼šä¸å†éœ€è¦å¤æ‚çš„ç§Ÿæˆ·è¯†åˆ«å·¥å…·ç±»
5. **axiosæ‹¦æˆªå™¨**ï¼šä¸å†è‡ªåŠ¨è®¾ç½®ç§Ÿæˆ·æ ‡è¯†åˆ°è¯·æ±‚å¤´

### 6.2 ä¿ç•™çš„åŠŸèƒ½

1. **å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»**ï¼šé€šè¿‡ `tenant_id` å­—æ®µå®ç°æ•°æ®éš”ç¦»
2. **ç§Ÿæˆ·ä¸Šä¸‹æ–‡**ï¼šé€šè¿‡ `TenantContextHolder` è®¾ç½®ç§Ÿæˆ·ä¸Šä¸‹æ–‡
3. **MyBatis Pluså¤šç§Ÿæˆ·æ’ä»¶**ï¼šè‡ªåŠ¨åœ¨SQLä¸­æ·»åŠ  `tenant_id` æ¡ä»¶

---

## ğŸ“‹ ä¸ƒã€å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šæ•°æ®åº“æ›´æ–°

```sql
-- å¦‚æœtenantè¡¨è¿˜æ²¡æœ‰tenant_identifierå­—æ®µï¼Œæ‰§è¡Œï¼š
ALTER TABLE tenant ADD COLUMN tenant_identifier VARCHAR(64) UNIQUE COMMENT 'ç§Ÿæˆ·æ ‡è¯†ç ï¼ˆCç«¯ä½¿ç”¨ï¼‰';

-- ä¸ºç°æœ‰ç§Ÿæˆ·è®¾ç½®tenantIdentifierï¼ˆå¯ä»¥ç­‰äºtenantCodeï¼‰
UPDATE tenant SET tenant_identifier = tenant_code WHERE tenant_identifier IS NULL;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_tenant_identifier ON tenant(tenant_identifier);
```

### æ­¥éª¤2ï¼šåç«¯ä»£ç æ›´æ–°

- âœ… æ›´æ–° `CustomerLoginRequest.java`ï¼š`tenantIdentifier` æ”¹ä¸ºå¿…å¡«
- âœ… æ›´æ–° `CustomerRegisterRequest.java`ï¼š`tenantIdentifier` æ”¹ä¸ºå¿…å¡«
- âœ… ç®€åŒ– `CustomerAuthController.java`ï¼šç§»é™¤å¤æ‚çš„ç§Ÿæˆ·è¯†åˆ«é€»è¾‘
- âœ… æ›´æ–° `TenantServiceImpl.java`ï¼šæ³¨å†Œæ—¶è®¾ç½® `tenant_identifier`

### æ­¥éª¤3ï¼šå‰ç«¯ä»£ç æ›´æ–°

- âœ… æ›´æ–° `Login.tsx`ï¼šCç«¯ç™»å½•è¡¨å•æ˜¾ç¤ºç§Ÿæˆ·æ ‡è¯†è¾“å…¥æ¡†
- âœ… æ›´æ–° `Register.tsx`ï¼šCç«¯æ³¨å†Œè¡¨å•æ˜¾ç¤ºç§Ÿæˆ·æ ‡è¯†è¾“å…¥æ¡†
- âœ… æ›´æ–° `auth.ts`ï¼šAPIè°ƒç”¨å‚æ•°è°ƒæ•´
- âœ… æ›´æ–° `axios.ts`ï¼šç§»é™¤è‡ªåŠ¨è®¾ç½®è¯·æ±‚å¤´çš„é€»è¾‘

---

## ğŸ¯ å…«ã€ä½¿ç”¨æµç¨‹

### 8.1 Cç«¯ç™»å½•æµç¨‹

1. ç”¨æˆ·è®¿é—® `/login` é¡µé¢
2. ç”¨æˆ·è¾“å…¥ï¼šç§Ÿæˆ·æ ‡è¯†ï¼ˆå¦‚ï¼šEDU_001ï¼‰ã€ç”¨æˆ·åã€å¯†ç 
3. ç‚¹å‡»"ç™»å½•"
4. åç«¯æ ¹æ®ç§Ÿæˆ·æ ‡è¯†æŸ¥è¯¢ç§Ÿæˆ·ï¼ŒéªŒè¯ç”¨æˆ·åå’Œå¯†ç 
5. ç™»å½•æˆåŠŸåè·³è½¬åˆ° `/chat`

### 8.2 Cç«¯æ³¨å†Œæµç¨‹

1. ç”¨æˆ·è®¿é—® `/register` é¡µé¢
2. ç”¨æˆ·è¾“å…¥ï¼šç§Ÿæˆ·æ ‡è¯†ï¼ˆå¦‚ï¼šEDU_001ï¼‰ã€ç”¨æˆ·åã€å¯†ç ã€å…¶ä»–ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
3. ç‚¹å‡»"æ³¨å†Œ"
4. åç«¯æ ¹æ®ç§Ÿæˆ·æ ‡è¯†æŸ¥è¯¢ç§Ÿæˆ·ï¼Œåˆ›å»ºç”¨æˆ·è´¦æˆ·
5. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•ï¼Œè·³è½¬åˆ° `/chat`

### 8.3 Bç«¯ç™»å½•æµç¨‹

1. ç”¨æˆ·è®¿é—® `/login` é¡µé¢
2. ç‚¹å‡»"æˆ‘æ˜¯ç®¡ç†å‘˜ â†’"åˆ‡æ¢åˆ°Bç«¯ç™»å½•
3. ç”¨æˆ·è¾“å…¥ï¼šç§Ÿæˆ·ç¼–ç ï¼ˆå¦‚ï¼šTENANT_001ï¼‰ã€ç”¨æˆ·åã€å¯†ç 
4. ç‚¹å‡»"ç™»å½•"
5. ç™»å½•æˆåŠŸåè·³è½¬åˆ° `/tickets`

### 8.4 Bç«¯æ³¨å†Œæµç¨‹

1. ç”¨æˆ·è®¿é—® `/register` é¡µé¢
2. ç‚¹å‡»"æˆ‘æ˜¯ç®¡ç†å‘˜ â†’"åˆ‡æ¢åˆ°Bç«¯æ³¨å†Œ
3. ç”¨æˆ·è¾“å…¥ï¼šç§Ÿæˆ·ç¼–ç ã€ç§Ÿæˆ·åç§°ã€ç§Ÿæˆ·æ ‡è¯†ç ï¼ˆå¯é€‰ï¼‰ã€ç®¡ç†å‘˜ç”¨æˆ·åã€å¯†ç 
4. ç‚¹å‡»"æ³¨å†Œ"
5. æ³¨å†ŒæˆåŠŸåè·³è½¬åˆ° `/login`

---

## âš ï¸ ä¹ã€æ³¨æ„äº‹é¡¹

### 9.1 ç§Ÿæˆ·æ ‡è¯†ç è®¾ç½®

- æ¯ä¸ªç§Ÿæˆ·å¿…é¡»è®¾ç½® `tenant_identifier` å­—æ®µ
- `tenant_identifier` åº”è¯¥æ˜¯å”¯ä¸€çš„ã€å‹å¥½çš„æ ‡è¯†ï¼ˆå¦‚ï¼šEDU_001ã€COMPANY_ABCï¼‰
- å¯ä»¥é€šè¿‡Bç«¯æ³¨å†Œæ—¶è®¾ç½®ï¼Œæˆ–é€šè¿‡æ•°æ®åº“ç›´æ¥è®¾ç½®

### 9.2 é”™è¯¯å¤„ç†

- å¦‚æœç§Ÿæˆ·æ ‡è¯†ä¸ºç©ºï¼Œè¿”å›ï¼š`ç§Ÿæˆ·æ ‡è¯†ä¸èƒ½ä¸ºç©º`
- å¦‚æœç§Ÿæˆ·æ ‡è¯†ä¸å­˜åœ¨ï¼Œè¿”å›ï¼š`ç§Ÿæˆ·æ ‡è¯†ç ä¸å­˜åœ¨: xxx`
- å¦‚æœç§Ÿæˆ·å·²ç¦ç”¨ï¼Œè¿”å›ï¼š`ç§Ÿæˆ·æ ‡è¯†ç ä¸å­˜åœ¨: xxx`ï¼ˆå› ä¸ºæŸ¥è¯¢æ—¶å·²è¿‡æ»¤ç¦ç”¨ç§Ÿæˆ·ï¼‰

### 9.3 å®‰å…¨æ€§

- Cç«¯ç™»å½•åªèƒ½ç™»å½•USERè§’è‰²çš„ç”¨æˆ·
- Bç«¯ç™»å½•å¯ä»¥ç™»å½•ADMINæˆ–AGENTè§’è‰²çš„ç”¨æˆ·
- ç§Ÿæˆ·æ ‡è¯†ç æ˜¯å…¬å¼€çš„ï¼Œä½†åªæœ‰çŸ¥é“ç§Ÿæˆ·æ ‡è¯†çš„ç”¨æˆ·æ‰èƒ½ç™»å½•è¯¥ç§Ÿæˆ·ä¸‹çš„è´¦æˆ·

---

## ğŸ“Š åã€æ¶æ„å¯¹æ¯”

### 10.1 ç®€åŒ–å‰ï¼ˆå¤æ‚æ–¹æ¡ˆï¼‰

```
ç”¨æˆ·ç™»å½•
  â†“
ç³»ç»Ÿå°è¯•å¤šç§æ–¹å¼è¯†åˆ«ç§Ÿæˆ·ï¼š
  1. URLå‚æ•° ?tenant=xxx
  2. è¯·æ±‚å¤´ X-Tenant-Identifier
  3. è¯·æ±‚ä½“ tenantIdentifier
  â†“
æ ¹æ®ä¼˜å…ˆçº§é€‰æ‹©ä¸€ç§æ–¹å¼
  â†“
æŸ¥è¯¢ç§Ÿæˆ·
```

**é—®é¢˜**ï¼š
- é€»è¾‘å¤æ‚ï¼Œéš¾ä»¥ç†è§£
- ä¼˜å…ˆçº§ä¸æ˜ç¡®
- è°ƒè¯•å›°éš¾

### 10.2 ç®€åŒ–åï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

```
ç”¨æˆ·ç™»å½•
  â†“
ç”¨æˆ·è¾“å…¥ç§Ÿæˆ·æ ‡è¯†
  â†“
åç«¯ç›´æ¥æ ¹æ®ç§Ÿæˆ·æ ‡è¯†æŸ¥è¡¨
  â†“
æŸ¥è¯¢ç§Ÿæˆ·
```

**ä¼˜åŠ¿**ï¼š
- é€»è¾‘ç®€å•æ¸…æ™°
- ç”¨æˆ·å¯æ§
- æ˜“äºç»´æŠ¤å’Œè°ƒè¯•

---

## ğŸ“ åä¸€ã€ä»£ç æ¸…å•

### 11.1 åç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `CustomerLoginRequest.java` | Cç«¯ç™»å½•DTO | âœ… å·²æ›´æ–° |
| `CustomerRegisterRequest.java` | Cç«¯æ³¨å†ŒDTO | âœ… å·²æ›´æ–° |
| `CustomerAuthController.java` | Cç«¯è®¤è¯Controller | âœ… å·²ç®€åŒ– |
| `AdminAuthController.java` | Bç«¯è®¤è¯Controller | âœ… å·²æ›´æ–° |
| `TenantServiceImpl.java` | ç§Ÿæˆ·æœåŠ¡å®ç° | âœ… å·²æ›´æ–° |

### 11.2 å‰ç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `Login.tsx` | ç™»å½•é¡µé¢ | âœ… å·²æ›´æ–° |
| `Register.tsx` | æ³¨å†Œé¡µé¢ | âœ… å·²æ›´æ–° |
| `auth.ts` | APIè°ƒç”¨ | âœ… å·²æ›´æ–° |
| `axios.ts` | axiosæ‹¦æˆªå™¨ | âœ… å·²ç®€åŒ– |

---

## ğŸ¯ åäºŒã€æ€»ç»“

### 12.1 æ ¸å¿ƒå˜åŒ–

1. **ç®€åŒ–ç§Ÿæˆ·è¯†åˆ«**ï¼šä»å¤æ‚çš„å¤šä¼˜å…ˆçº§è¯†åˆ«æ”¹ä¸ºç”¨æˆ·æ‰‹åŠ¨è¾“å…¥
2. **ç»Ÿä¸€æ¥å£**ï¼šBç«¯å’ŒCç«¯éƒ½ä½¿ç”¨è¯·æ±‚ä½“ä¼ é€’ç§Ÿæˆ·ä¿¡æ¯
3. **ç§»é™¤å¤æ‚é€»è¾‘**ï¼šä¸å†éœ€è¦URLå‚æ•°ã€è¯·æ±‚å¤´è¯†åˆ«ç­‰å¤æ‚é€»è¾‘

### 12.2 ä¼˜åŠ¿

- âœ… **ç®€å•ç›´æ¥**ï¼šé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£
- âœ… **ç”¨æˆ·å¯æ§**ï¼šç”¨æˆ·æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å“ªä¸ªç§Ÿæˆ·ä¸‹
- âœ… **æ˜“äºç»´æŠ¤**ï¼šä»£ç ç®€æ´ï¼Œä¾¿äºè°ƒè¯•å’Œæ‰©å±•
- âœ… **ç¬¦åˆå¸¸è§„**ï¼šç¬¦åˆå¸¸è§çš„å¤šç§Ÿæˆ·ç³»ç»Ÿè®¾è®¡æ¨¡å¼

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv3.0ï¼ˆç®€åŒ–ç‰ˆï¼‰  
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-14  
**æœ€åæ›´æ–°**ï¼š2026-01-14

