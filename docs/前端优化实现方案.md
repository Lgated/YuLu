# 前端优化实现方案

根据新增的会话管理和知识库功能，提供完整的前端实现代码。

---

## 一、API 接口扩展

### 1.1 扩展 chat.ts API

**文件位置**：`frontend/src/api/chat.ts`

在现有代码基础上添加：

```typescript
import http from './axios';
import type { ApiResponse, ChatMessage, ChatSession } from './types';

/**
 * C端聊天API（客户使用）
 */
export const chatApi = {
  // 发送消息给AI
  ask(payload: { sessionId?: number | null; question: string }) {
    return http.post<ApiResponse<ChatAskResponse>>('/customer/chat/ask', payload);
  },

  // 当前用户的会话列表（C端）
  sessions() {
    return http.get<ApiResponse<ChatSession[]>>('/customer/chat/sessions');
  },

  // 获取增强版会话列表（含统计信息）
  sessionsEnhanced() {
    return http.get<ApiResponse<SessionResponse[]>>('/customer/chat/sessions/enhanced');
  },

  // 查看当前用户的历史消息
  messages(sessionId: number) {
    return http.get<ApiResponse<ChatMessage[]>>(`/customer/chat/messages/${sessionId}`);
  },

  // 转人工服务
  transferToAgent(sessionId: number) {
    return http.post<ApiResponse<void>>('/customer/chat/transfer', null, {
      params: { sessionId }
    });
  },

  // ========== 新增：会话管理 ==========
  
  // 创建新会话
  createSession(title?: string) {
    return http.post<ApiResponse<ChatSession>>('/customer/chat/sessions', { title });
  },

  // 删除会话
  deleteSession(sessionId: number) {
    return http.delete<ApiResponse<void>>(`/customer/chat/sessions/${sessionId}`);
  },

  // 更新会话标题
  updateSession(sessionId: number, title: string) {
    return http.put<ApiResponse<void>>(`/customer/chat/sessions/${sessionId}`, { title });
  },

  // 获取会话详情
  getSessionDetail(sessionId: number) {
    return http.get<ApiResponse<SessionResponse>>(`/customer/chat/sessions/${sessionId}`);
  }
};

/**
 * B端会话管理API（管理员/客服使用）
 */
export const sessionApi = {
  // 获取当前租户下所有会话
  listAllSessions() {
    return http.get<ApiResponse<ChatSession[]>>('/admin/session/list');
  },

  // 查看某个用户的会话列表
  listUserSessions(userId: number) {
    return http.get<ApiResponse<ChatSession[]>>(`/admin/session/user/${userId}`);
  },

  // 查看会话消息列表
  listMessages(sessionId: number) {
    return http.get<ApiResponse<ChatMessage[]>>(`/admin/session/${sessionId}/messages`);
  }
};

/**
 * 知识库管理API（管理员使用）
 */
export const knowledgeApi = {
  // 上传文档
  uploadDocument(file: File, title?: string, source?: string) {
    const formData = new FormData();
    formData.append('file', file);
    if (title) formData.append('title', title);
    if (source) formData.append('source', source);
    
    return http.post<ApiResponse<number>>('/admin/document/upload', formData, {
      headers: {
        'Content-Type': 'multipart/form-data'
      }
    });
  },

  // 获取文档列表
  listDocuments(pageNum?: number, pageSize?: number) {
    return http.get<ApiResponse<DocumentListItem[]>>('/admin/document/list', {
      params: { pageNum, pageSize }
    });
  },

  // 获取文档详情
  getDocumentDetail(documentId: number) {
    return http.get<ApiResponse<DocumentDetail>>(`/admin/document/${documentId}`);
  },

  // 删除文档
  deleteDocument(documentId: number) {
    return http.delete<ApiResponse<void>>(`/admin/document/${documentId}`);
  },

  // 索引文档
  indexDocument(documentId: number) {
    return http.post<ApiResponse<void>>(`/admin/knowledge/document/${documentId}/index`);
  }
};
```

### 1.2 扩展 types.ts

**文件位置**：`frontend/src/api/types.ts`

在现有类型基础上添加：

```typescript
// 现有的类型...

/**
 * 聊天请求响应（包含引用）
 */
export interface ChatAskResponse {
  aiMessage: ChatMessage;
  refs: RagRef[];
}

/**
 * RAG 引用
 */
export interface RagRef {
  documentId: number;
  chunkId: number;
  chunkIndex: number;
  title: string;
  source?: string;
  fileType?: string;
  score: number;
}

/**
 * 会话响应（增强版，含统计信息）
 */
export interface SessionResponse {
  id: number;
  title: string;
  createTime: string;
  updateTime: string;
  messageCount: number;
  lastMessageTime?: string;
  lastMessagePreview?: string;
}

/**
 * 文档列表项
 */
export interface DocumentListItem {
  id: number;
  title: string;
  source?: string;
  fileType?: string;
  fileSize?: number;
  status: number; // 0-未索引，1-已索引
  createTime: string;
}

/**
 * 文档详情
 */
export interface DocumentDetail {
  id: number;
  title: string;
  source?: string;
  fileType?: string;
  fileSize?: number;
  status: number;
  indexedAt?: string;
  createTime: string;
  updateTime: string;
  contentPreview?: string;
}
```

---

## 二、客户端（C端）优化

### 2.1 优化 ChatPage.tsx

**文件位置**：`frontend/src/pages/ChatPage.tsx`

完整优化后的代码：

```typescript
import { useEffect, useRef, useState } from 'react';
import { Card, List, Input, Button, message as antdMessage, Tag, Popconfirm, Modal, Space } from 'antd';
import { PlusOutlined, DeleteOutlined, EditOutlined } from '@ant-design/icons';
import { chatApi } from '../api/chat';
import type { ChatMessage, ChatSession, ChatAskResponse, RagRef, SessionResponse } from '../api/types';
import { getCurrentSessionId, setCurrentSessionId as saveSessionId } from '../utils/storage';

const { TextArea } = Input;

export default function ChatPage() {
  const [sessions, setSessions] = useState<SessionResponse[]>([]);
  const [currentSessionId, setCurrentSessionId] = useState<number | null>(null);
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [question, setQuestion] = useState('');
  const [loading, setLoading] = useState(false);
  const [creatingSession, setCreatingSession] = useState(false);
  const [editingSession, setEditingSession] = useState<{ id: number; title: string } | null>(null);
  const chatWindowRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    loadSessions(true);
  }, []);

  useEffect(() => {
    const el = chatWindowRef.current;
    if (el) {
      el.scrollTop = el.scrollHeight;
    }
  }, [messages]);

  const loadSessions = async (autoSelect: boolean) => {
    try {
      // 使用增强版接口，获取含统计信息的会话列表
      const res = await chatApi.sessionsEnhanced();
      if (res.success || res.code === '200') {
        const list = res.data || [];
        setSessions(list);

        if (!autoSelect) return;

        const savedId = getCurrentSessionId();
        const targetId =
          savedId && list.some((s) => s.id === savedId)
            ? savedId
            : list.length > 0
            ? list[0].id
            : null;

        if (targetId) {
          setCurrentSessionId(targetId);
          saveSessionId(targetId);
          await loadMessages(targetId);
        } else {
          setCurrentSessionId(null);
          setMessages([]);
        }
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '加载会话失败');
    }
  };

  const loadMessages = async (sessionId: number) => {
    try {
      const res = await chatApi.messages(sessionId);
      if (res.success || res.code === '200') {
        setMessages(res.data || []);
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '加载消息失败');
    }
  };

  // 创建新会话
  const handleCreateSession = async () => {
    setCreatingSession(true);
    try {
      const res = await chatApi.createSession();
      if (res.success || res.code === '200') {
        antdMessage.success('会话创建成功');
        await loadSessions(false);
        // 切换到新会话
        if (res.data) {
          setCurrentSessionId(res.data.id);
          saveSessionId(res.data.id);
          setMessages([]);
        }
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '创建会话失败');
    } finally {
      setCreatingSession(false);
    }
  };

  // 删除会话
  const handleDeleteSession = async (sessionId: number) => {
    try {
      const res = await chatApi.deleteSession(sessionId);
      if (res.success || res.code === '200') {
        antdMessage.success('会话删除成功');
        // 如果删除的是当前会话，切换到其他会话
        if (sessionId === currentSessionId) {
          const remaining = sessions.filter((s) => s.id !== sessionId);
          if (remaining.length > 0) {
            setCurrentSessionId(remaining[0].id);
            saveSessionId(remaining[0].id);
            await loadMessages(remaining[0].id);
          } else {
            setCurrentSessionId(null);
            setMessages([]);
          }
        }
        await loadSessions(false);
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '删除会话失败');
    }
  };

  // 更新会话标题
  const handleUpdateSession = async (sessionId: number, newTitle: string) => {
    try {
      const res = await chatApi.updateSession(sessionId, newTitle);
      if (res.success || res.code === '200') {
        antdMessage.success('会话标题更新成功');
        await loadSessions(false);
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '更新会话失败');
    }
  };

  const handleSend = async () => {
    if (!question.trim()) return;
    setLoading(true);
    try {
      const payload = { sessionId: currentSessionId ?? undefined, question };
      const res = await chatApi.ask(payload);
      if (res.success || res.code === '200') {
        const data: ChatAskResponse = res.data;
        const aiMsg = data.aiMessage;
        const userMsg: ChatMessage = {
          id: Date.now(),
          tenantId: aiMsg.tenantId,
          sessionId: aiMsg.sessionId,
          senderType: 'USER',
          content: question,
          emotion: 'NORMAL',
          createTime: new Date().toISOString()
        };
        setCurrentSessionId(aiMsg.sessionId);
        saveSessionId(aiMsg.sessionId);
        // 将用户消息和AI消息都添加到消息列表，并保存引用信息
        setMessages((prev) => [
          ...prev,
          { ...userMsg, refs: undefined }, // 用户消息没有引用
          { ...aiMsg, refs: data.refs } // AI消息包含引用
        ]);
        setQuestion('');
        await loadSessions(false); // 刷新会话列表
      }
    } catch (e: any) {
      antdMessage.error(e?.response?.data?.message || '发送失败');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div
      style={{
        display: 'flex',
        gap: 16,
        height: 'calc(100vh - 96px)',
        overflow: 'hidden'
      }}
    >
      {/* 会话列表 */}
      <Card
        title={
          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
            <span>会话列表</span>
            <Button
              type="primary"
              icon={<PlusOutlined />}
              size="small"
              onClick={handleCreateSession}
              loading={creatingSession}
            >
              新建
            </Button>
          </div>
        }
        style={{ width: 300, overflowY: 'auto', height: '100%' }}
      >
        <List
          dataSource={sessions}
          renderItem={(item) => (
            <List.Item
              style={{
                cursor: 'pointer',
                background: item.id === currentSessionId ? '#e6f4ff' : undefined,
                padding: '8px 12px',
                borderRadius: 4
              }}
              onClick={() => {
                setCurrentSessionId(item.id);
                saveSessionId(item.id);
                loadMessages(item.id);
              }}
              actions={[
                <Popconfirm
                  title="确定删除此会话吗？"
                  onConfirm={(e) => {
                    e?.stopPropagation();
                    handleDeleteSession(item.id);
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <Button
                    type="text"
                    danger
                    size="small"
                    icon={<DeleteOutlined />}
                    onClick={(e) => e.stopPropagation()}
                  />
                </Popconfirm>
              ]}
            >
              <List.Item.Meta
                title={
                  <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>
                    <span>{item.title || `会话 #${item.id}`}</span>
                  </div>
                }
                description={
                  <div>
                    <div style={{ fontSize: 12, color: '#999', marginTop: 4 }}>
                      {item.lastMessagePreview || '暂无消息'}
                    </div>
                    <div style={{ fontSize: 11, color: '#ccc', marginTop: 2 }}>
                      {item.messageCount} 条消息
                    </div>
                  </div>
                }
              />
            </List.Item>
          )}
        />
      </Card>

      {/* 对话窗口 */}
      <Card
        title="智能对话"
        style={{ flex: 1, height: '100%' }}
        bodyStyle={{
          display: 'flex',
          flexDirection: 'column',
          height: '100%',
          padding: 16,
          paddingTop: 8
        }}
      >
        <div className="chat-window" ref={chatWindowRef} style={{ flex: 1, overflowY: 'auto', marginBottom: 16 }}>
          <List
            dataSource={messages}
            renderItem={(msg) => {
              const isUser = msg.senderType === 'USER';
              const refs: RagRef[] = (msg as any).refs || [];
              
              return (
                <div className={`chat-message ${isUser ? 'user' : 'ai'}`} style={{ marginBottom: 16 }}>
                  <div className={`chat-bubble ${isUser ? 'user' : 'ai'}`}>
                    <div style={{ marginBottom: 4, fontSize: 12, opacity: 0.7 }}>
                      {isUser ? '用户' : 'AI'}
                      {!isUser && msg.emotion && msg.emotion !== 'NORMAL' && (
                        <Tag color="red" style={{ marginLeft: 8 }}>
                          {msg.emotion}
                        </Tag>
                      )}
                    </div>
                    <div>{msg.content}</div>
                    
                    {/* 显示引用文档 */}
                    {!isUser && refs && refs.length > 0 && (
                      <div style={{ marginTop: 8, paddingTop: 8, borderTop: '1px solid #f0f0f0' }}>
                        <div style={{ fontSize: 12, color: '#999', marginBottom: 4 }}>
                          参考文档：
                        </div>
                        <Space size={[8, 8]} wrap>
                          {refs.map((ref, index) => (
                            <Tag key={index} color="blue" style={{ margin: 0 }}>
                              {ref.title}
                            </Tag>
                          ))}
                        </Space>
                      </div>
                    )}
                  </div>
                </div>
              );
            }}
          />
        </div>
        <div>
          <TextArea
            rows={3}
            placeholder="请输入要咨询的问题..."
            value={question}
            onChange={(e) => setQuestion(e.target.value)}
            onPressEnter={(e) => {
              if (!e.shiftKey) {
                e.preventDefault();
                handleSend();
              }
            }}
          />
          <div style={{ textAlign: 'right', marginTop: 8 }}>
            <Button type="primary" onClick={handleSend} loading={loading}>
              发送
            </Button>
          </div>
        </div>
      </Card>
    </div>
  );
}
```

---

## 三、管理端（B端）优化

### 3.1 扩展 AdminLayout.tsx

**文件位置**：`frontend/src/components/layout/AdminLayout.tsx`

添加知识库菜单项：

```typescript
import { MessageOutlined, ProfileOutlined, BellOutlined, DashboardOutlined, BookOutlined } from '@ant-design/icons';
import type { ReactNode } from 'react';
import { PortalLayout } from './PortalLayout';

export function AdminLayout({ children }: { children: ReactNode }) {
  return (
    <PortalLayout
      logoText="YuLu 租户工作台"
      headerTitle="智链客服中台 · 租户端"
      menuItems={[
        {
          key: '/admin/dashboard',
          icon: <DashboardOutlined />,
          label: '数据看板'
        },
        {
          key: '/admin/tickets',
          icon: <ProfileOutlined />,
          label: '工单系统'
        },
        {
          key: '/admin/sessions',
          icon: <MessageOutlined />,
          label: '会话管理'
        },
        {
          key: '/admin/knowledge',  // 新增
          icon: <BookOutlined />,   // 新增
          label: '知识库'           // 新增
        },
        {
          key: '/admin/notify',
          icon: <BellOutlined />,
          label: '通知中心'
        }
      ]}
    >
      {children}
    </PortalLayout>
  );
}
```

### 3.2 创建知识库管理页面

**文件位置**：`frontend/src/pages/admin/KnowledgePage.tsx`

```typescript
import { useState, useEffect } from 'react';
import {
  Card,
  Table,
  Button,
  Upload,
  message,
  Space,
  Tag,
  Popconfirm,
  Modal,
  Input,
  Form,
  Progress
} from 'antd';
import {
  UploadOutlined,
  DeleteOutlined,
  ReloadOutlined,
  FileTextOutlined
} from '@ant-design/icons';
import type { UploadFile, UploadProps } from 'antd';
import { knowledgeApi } from '../../api/chat';
import type { DocumentListItem } from '../../api/types';

const { TextArea } = Input;

export default function KnowledgePage() {
  const [documents, setDocuments] = useState<DocumentListItem[]>([]);
  const [loading, setLoading] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadModalVisible, setUploadModalVisible] = useState(false);
  const [indexingDocId, setIndexingDocId] = useState<number | null>(null);
  const [form] = Form.useForm();

  useEffect(() => {
    loadDocuments();
  }, []);

  const loadDocuments = async () => {
    setLoading(true);
    try {
      const res = await knowledgeApi.listDocuments();
      if (res.success || res.code === '200') {
        setDocuments(res.data || []);
      }
    } catch (e: any) {
      message.error(e?.response?.data?.message || '加载文档列表失败');
    } finally {
      setLoading(false);
    }
  };

  const handleUpload = async (values: { title?: string; source?: string }) => {
    const fileList = form.getFieldValue('fileList') as UploadFile[];
    if (!fileList || fileList.length === 0) {
      message.warning('请选择要上传的文件');
      return;
    }

    const file = fileList[0].originFileObj;
    if (!file) {
      message.warning('文件无效');
      return;
    }

    setUploading(true);
    try {
      const res = await knowledgeApi.uploadDocument(
        file,
        values.title,
        values.source
      );
      if (res.success || res.code === '200') {
        message.success('文档上传成功');
        setUploadModalVisible(false);
        form.resetFields();
        await loadDocuments();
        
        // 自动开始索引
        if (res.data) {
          await handleIndex(res.data);
        }
      }
    } catch (e: any) {
      message.error(e?.response?.data?.message || '上传失败');
    } finally {
      setUploading(false);
    }
  };

  const handleIndex = async (documentId: number) => {
    setIndexingDocId(documentId);
    try {
      const res = await knowledgeApi.indexDocument(documentId);
      if (res.success || res.code === '200') {
        message.success('文档索引成功');
        await loadDocuments();
      }
    } catch (e: any) {
      message.error(e?.response?.data?.message || '索引失败');
    } finally {
      setIndexingDocId(null);
    }
  };

  const handleDelete = async (documentId: number) => {
    try {
      const res = await knowledgeApi.deleteDocument(documentId);
      if (res.success || res.code === '200') {
        message.success('文档删除成功');
        await loadDocuments();
      }
    } catch (e: any) {
      message.error(e?.response?.data?.message || '删除失败');
    }
  };

  const uploadProps: UploadProps = {
    beforeUpload: () => false, // 阻止自动上传
    maxCount: 1,
    accept: '.txt,.pdf,.doc,.docx,.md'
  };

  const columns = [
    {
      title: '文档标题',
      dataIndex: 'title',
      key: 'title',
      render: (text: string) => text || '未命名文档'
    },
    {
      title: '来源',
      dataIndex: 'source',
      key: 'source',
      render: (text: string) => text || '-'
    },
    {
      title: '文件类型',
      dataIndex: 'fileType',
      key: 'fileType',
      render: (text: string) => <Tag>{text || '-'}</Tag>
    },
    {
      title: '文件大小',
      dataIndex: 'fileSize',
      key: 'fileSize',
      render: (size: number) => {
        if (!size) return '-';
        if (size < 1024) return `${size} B`;
        if (size < 1024 * 1024) return `${(size / 1024).toFixed(2)} KB`;
        return `${(size / (1024 * 1024)).toFixed(2)} MB`;
      }
    },
    {
      title: '状态',
      dataIndex: 'status',
      key: 'status',
      render: (status: number) => {
        if (status === 1) {
          return <Tag color="green">已索引</Tag>;
        }
        return <Tag color="orange">未索引</Tag>;
      }
    },
    {
      title: '创建时间',
      dataIndex: 'createTime',
      key: 'createTime',
      render: (time: string) => {
        if (!time) return '-';
        return new Date(time).toLocaleString('zh-CN');
      }
    },
    {
      title: '操作',
      key: 'action',
      render: (_: any, record: DocumentListItem) => (
        <Space>
          {record.status === 0 && (
            <Button
              type="link"
              icon={<ReloadOutlined />}
              onClick={() => handleIndex(record.id)}
              loading={indexingDocId === record.id}
            >
              索引
            </Button>
          )}
          <Popconfirm
            title="确定删除此文档吗？"
            onConfirm={() => handleDelete(record.id)}
          >
            <Button type="link" danger icon={<DeleteOutlined />}>
              删除
            </Button>
          </Popconfirm>
        </Space>
      )
    }
  ];

  return (
    <div>
      <Card
        title="知识库管理"
        extra={
          <Button
            type="primary"
            icon={<UploadOutlined />}
            onClick={() => setUploadModalVisible(true)}
          >
            上传文档
          </Button>
        }
      >
        <Table
          columns={columns}
          dataSource={documents}
          rowKey="id"
          loading={loading}
          pagination={{
            pageSize: 10,
            showSizeChanger: true,
            showTotal: (total) => `共 ${total} 条`
          }}
        />
      </Card>

      {/* 上传文档弹窗 */}
      <Modal
        title="上传文档"
        open={uploadModalVisible}
        onCancel={() => {
          setUploadModalVisible(false);
          form.resetFields();
        }}
        footer={null}
        width={600}
      >
        <Form
          form={form}
          layout="vertical"
          onFinish={handleUpload}
        >
          <Form.Item
            label="选择文件"
            name="fileList"
            rules={[{ required: true, message: '请选择要上传的文件' }]}
          >
            <Upload {...uploadProps}>
              <Button icon={<UploadOutlined />}>选择文件</Button>
            </Upload>
            <div style={{ marginTop: 8, fontSize: 12, color: '#999' }}>
              支持格式：.txt, .pdf, .doc, .docx, .md
            </div>
          </Form.Item>

          <Form.Item label="文档标题（可选）" name="title">
            <Input placeholder="留空则使用文件名" />
          </Form.Item>

          <Form.Item label="来源（可选）" name="source">
            <Input placeholder="例如：内部文档、产品手册等" />
          </Form.Item>

          <Form.Item>
            <Space>
              <Button type="primary" htmlType="submit" loading={uploading}>
                上传
              </Button>
              <Button onClick={() => {
                setUploadModalVisible(false);
                form.resetFields();
              }}>
                取消
              </Button>
            </Space>
          </Form.Item>
        </Form>
      </Modal>
    </div>
  );
}
```

### 3.3 更新 App.tsx 路由

**文件位置**：`frontend/src/App.tsx`

添加知识库页面路由：

```typescript
// 在现有路由配置中添加
{
  path: '/admin/knowledge',
  element: (
    <AdminLayout>
      <KnowledgePage />
    </AdminLayout>
  )
}
```

---

## 四、样式优化

### 4.1 优化聊天消息样式

**文件位置**：`frontend/src/styles/global.css`

添加或更新以下样式：

```css
.chat-message {
  margin-bottom: 16px;
}

.chat-message.user {
  text-align: right;
}

.chat-message.ai {
  text-align: left;
}

.chat-bubble {
  display: inline-block;
  max-width: 70%;
  padding: 12px 16px;
  border-radius: 12px;
  word-wrap: break-word;
}

.chat-bubble.user {
  background: #1890ff;
  color: white;
}

.chat-bubble.ai {
  background: #f0f0f0;
  color: #333;
}

.chat-window {
  padding: 16px;
  height: 100%;
  overflow-y: auto;
}
```

---

## 五、功能说明

### 5.1 客户端功能

1. **新增会话按钮**：
   - 在会话列表标题栏右侧
   - 点击后创建新会话并自动切换

2. **会话管理**：
   - 删除会话（带确认）
   - 显示会话统计信息（消息数量、最后消息预览）

3. **对话引用显示**：
   - 在 AI 消息下方显示参考文档
   - 以 Tag 形式展示文档标题
   - 仅显示 title 字段

### 5.2 管理端功能

1. **知识库菜单**：
   - 在左侧菜单栏添加"知识库"项
   - 使用 BookOutlined 图标

2. **文档上传**：
   - 支持多种格式（.txt, .pdf, .doc, .docx, .md）
   - 可设置文档标题和来源
   - 上传后自动开始索引

3. **文档管理**：
   - 文档列表展示
   - 索引状态显示
   - 手动触发索引
   - 删除文档

---

## 六、API 路径说明

确保后端接口路径与前端调用一致：

- **客户端会话管理**：`/api/customer/chat/sessions/*`
- **知识库管理**：`/api/admin/document/*`
- **文档索引**：`/api/admin/knowledge/document/{id}/index`

---

以上是完整的前端优化实现方案，所有代码都已列出，可以直接使用。


















